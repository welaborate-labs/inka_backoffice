<h1 class="title is-size-3 mt-5 has-text-centered">Reservas em progresso</h1>

<div class="columns mt-5 has-text-centered">
  <div class="column">
    <h1 class="has-text-weight-bold">Começa/Termina em</h1>
  </div>
  <div class="column">
    <h1 class="has-text-weight-bold">Cliente</h1>
  </div>
  <div class="column">
    <h1 class="has-text-weight-bold">Profissional</h1>
  </div>
  <div class="column">
    <h1 class="has-text-weight-bold">Informações do agendamento</h1>
  </div>
  <div class="column">
    <h1 class="has-text-weight-bold">Valor Total</h1>
  </div>
  <div class="column">
    <h1 class="has-text-weight-bold">Nome do(s) Serviço(s)</h1>
  </div>
  <div class="column"></div>
</div>

<% @bookings.each do |booking| %>
  <div class="columns is-vcentered has-text-centered">
    <div class="column">
      <%= booking.starts_at.to_time.strftime("%d/%m/%Y, %H:%M:%S") %><br />
      <%= booking.ends_at.to_time.strftime("%d/%m/%Y, %H:%M:%S") %>
    </div>
    <div class="column">
      <%= link_to booking.customer_name, booking.customer %>
    </div>
    <div class="column">
      <%= link_to booking.professional_name, booking.professional %>
    </div>
    <div class="column">
      <%= booking.notes %>
    </div>
    <div class="column">
      <%= format_currency(booking.service.total_value) %>
    </div>
    <div class="column">
      <%= booking.service.title %><br />
      <% if booking.service.optional_services.present? %>
        <% booking.service.optional_services.each do |optional| %>
          <%= optional.title %><br />
        <% end %>
      <% end %>
    </div>
    <div class="column">
      <%= form_with(model: booking) do |f| %>
        <%= f.label :status, "Completado", class: 'checkbox' %>
        <%= f.check_box :status, {}, 'completed', class: 'checkbox' %>
        <%= f.submit "Atualizar", class: "button is-primary is-fullwidth" %>
      <% end %>
    </div>
  </div>
<% end %>
