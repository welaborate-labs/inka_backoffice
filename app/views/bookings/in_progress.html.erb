<h1 class="title is-size-3 mt-5 has-text-centered">Serviços em Andamento</h1>

<div class="buttons is-centered">
  <%= link_to "Voltar", customers_bookings_in_progress_all_path, class: "button is-link" %>
  <%= link_to "Finalizar Serviços", customer_bookings_in_progress_to_completed_path, data: { turbo_method: :post, turbo_confirm: 'Deseja realmente confirmar?' }, class: "button is-primary" %>
</div>

<div class="columns has-text-centered has-background-light">
  <div class="column">
    <h1 class="has-text-weight-bold">Nome do(s) Serviço(s)</h1>
  </div>
  <div class="column">
    <h1 class="has-text-weight-bold">Duração</h1>
  </div>
  <div class="column">
    <h1 class="has-text-weight-bold">Preço</h1>
  </div>
</div>

<% @bookings.each do |booking| %>
  <div class="columns is-vcentered has-text-centered">
    <div class="column">
      <%= booking.service.title %><br />
    </div>
    <div class="column">
      <%= booking.service.duration %>
    </div>
    <div class="column">
      <%= format_currency(booking.service.price) %>
    </div>
  </div>

  <% if booking.service.optional_services %>
    <% booking.service.optional_services.each do |optional_service| %>
      <div class="columns is-vcentered has-text-centered">
        <div class="column"><%= optional_service.title %></div>
        <div class="column"><%= optional_service.duration %></div>
        <div class="column"><%= format_currency(optional_service.price) %></div>
      </div>
    <% end %>
  <% end %>
<% end %>

<div class="columns is-vcentered has-text-centered has-background-light">
  <div class="column"><h1 class="has-text-weight-bold">TOTAL</h1></div>
  <div class="column"><h1 class="has-text-weight-bold"><%= @total_duration %> Minuto(s)</h1></div>
  <div class="column"><h1 class="has-text-weight-bold"><%= format_currency(@total_price) %></h1></div>
</div>
